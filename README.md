# Отчет по анализу регульярного выражения

## Имется академическое регулярное выражение:
(ab|bc|bbbb|bbb)* bb(a|b)(a|b)(cac|accc|bca)* <br>
соответсвенно алфавит описывающий это вывражение {a, b, c}
## Построение ε-НКА:
Для начала по заданному регулярному выражению построим ε-НКА, постепенно расписывая каждый переход:
<img width="2323" height="417" alt="image" src="https://github.com/user-attachments/assets/78b467c3-aeb9-4c15-8365-e7d0dc22f7c8" />

Чтобы убедится в правильности и соответствии данного НКА и нашего выражение достаточно увидеть соответствия состояний и переходов из них с регулярным выражением:<br>
[0]-[18] = ε = (ab|bc|bbbb|bbb)*  которое повторялось 0 раз, т.е превращается в ε<br>
[0]-[1] = ε = вхождение в один из циклов повтора (ab|bc|bbbb|bbb)* <br>
далее внутри (ab|bc|bbbb|bbb) есть 4 разветвления:<br>
[2]-[3]-[4]=ab<br>
[5]-[6]-[7]=bc<br>
[8]-[9]-[10]-[11]-[12]=bbbb<br>
[13]-[14]-[15]-[16]=bbb<br>
[17]-[0]= ε = перезапуск цикла<br>
Все это описывает звезду Клини для (ab|bc|bbbb|bbb)* .<br>
Дальше идет обязательная часть слова bb(a|b)(a|b), описываемая состояниями с [18] по [30],<br>
и аналогично первой части описывается звезда Клини для части выражения (cac|accc|bca)*  состояниями с [30] по [46].<br>

## минимальный ДКА:
На основе  ε-НКА был построен ДКА по алгоритму Томпсона и минимизирован по алгоритму минимизации ДКА по разбиению состояний Hopcroft<br>
<img width="1452" height="742" alt="image" src="https://github.com/user-attachments/assets/209b3b00-2ccd-452f-8a03-0af66cb3c9b8" />

Дальше разберем таблицу эквивалентности:
возьмем 44 различных слова(w<sub>i</sub>) и пронумеруем для удобства  
Number	w<sub>i</sub><br>
	​
1	bbab<br>
2	ε <br>
3	a <br>
4	b <br>
5	accc <br>
6	cbc <br>
7	ca <br>
8	bbbab <br>
9	aa <br>
10	ac <br>
11	bab  <br>
12	bc <br>
13	ccc  <br>
14	ab <br>
15	abca <br>
16	c <br>
17	bbba <br>
18	ba <br>
19	cbca <br>
20	acbca <br>
21	bcb <br>
22	bb <br>
23	ccac <br>
24	cc <br>
25	accac <br>
26	bbbba <br>
27	bba <br>
28	abbca <br>
29	bbca <br>
30	acac <br>
31	bbb <br>
32	cccbca <br>
33	cabca <br>
34	acaccc <br>
35	bbbb <br>
36	bbbbb <br>
37	baa <br>
38	abbbab <br>
39	ccbca <br>
40	aaccc <br>
41	caccc <br>
42	abcb <br>
43	abbbba <br>
44	babbbab <br>

Ниже представлена таблица различимости состояний минимального ДКА, где столбцы это состояния 1 .. 44 :<br>
```

w01 (bbab):   + - - + - - + - + - - - - + + - + + - - - + - - - - - - - + + - - - + - - + - - - + + - <br>
w02 (eps):    - + + + + + + + + - - - - - - + + + + + + + - + - - - - - - + - - - - - - - - - - - - - <br>
w03 (a):      - - + + - - - - - - - + + + + - - + - - + + - - - - - - - + - - - - - - - - - + - + + - <br>
w04 (b):      - - + + - - - - - - - + + + - - - + - - + + - - - - - - + + - - - - - - - - - - - + - - <br>
w05 (accc):   - + - - + + + + + - - - - - - + + - + + - - - + - - - - - - + - - - - - - - - - - - - - <br>
w06 (cbc):    - - - - - + + + - - - - - - - - - - - - + - - - - - - - - - - - - - - - - - - - - - - - <br>
w07 (ca):     - - - - - - + - + - + - - + - - - - - - - + - - - - - - - - - - + - + - + - - - - - - - <br>
w08 (bbbab):  - - + + + - - + + - - - + + - - - + + - + + - - - + - + - + - - - - - + + - - - - + - + <br>
w09 (aa):     - - - - - - - - + - - - - + - - - + - - - + - - - - - - - - - - - - - - - - - - - + - - <br>
w10 (ac):     - - - - - - - - - + - + - - + - - - - + - - - - + - - - - - - - - + - - - + - - - - - - <br>
w11 (bab):    - - - + - - - - + - + - - + - - - + - - - + - - - - + - - - + - - - - - + - - - - - - - <br>
w12 (bc):     - - - - - - - - - + - + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - <br>
w13 (ccc):    - - - - - - - - - - - - + - - - - - - - - - + - - - - - - - - + - - - + - - - - - - - - <br>
w14 (ab):     - - - - - - - - + - - - - + - - - + - - - + - - - - - + - - - - - - - - + - - - - + - - <br>
w15 (abca):   - - + + - - - - - - - + + + + - - + - - + + - - - - - - - + - - - - - - - - - + - + + - <br>
w16 (c):      - - - - - - - - - - - - - - - + - - + - - - + - + - - - - - - - - - - - - - - - + - - + <br>
w17 (bbba):   - - + + - - + - + - - - + + - - - + + - + + - - - - - - - + + - - - + - - + - - - + + - <br>
w18 (ba):     - - - + - - - - + - - - - + - - - + - - - + - - - - - - - - - - - - - - + - - - - - - - <br>
w19 (cbca):   - - - - - - - - - - - - - - - - - - - - - - - + - - - - - - - - - - - - - - + - - - - - <br>
w20 (acbca):  - - - - - - - - - + - + - - + - - - - + - - - - + - - - - - - - - + - - - + - - - - - - <br>
w21 (bcb):    - - - - - - - - - - - - - - - - - - - + - - - - - - - - - - - - - - - - - - - - - - - - <br>
w22 (bb):     - - - + - - - - + - - - - + - - - + - - - + - - - - + - - - + - - - - - + - - - - - - - <br>
w23 (ccac):   - - - - - - - - - - - - - - - - - - - - - - - + - - - - - - - - - - - - - - + - - - - - <br>
w24 (cc):     - - - - - - - - - - - - - - - + - - + - - - + - + - - - - - - - - - - - - - - - + - - + <br>
w25 (accac):  - - - - - - - - - - - - + - - - - - - - - - + - - - - - - - - + - - - + - - - - - - - - <br>
w26 (bbbba):  - - + + - - + - + - - - + + - - - + + - + + - - - + - + - + - - - - - + + - - - - + - + <br>
w27 (bba):    - - - - - - - - + - - - - + - - - + - - - + - - - - - - - - - - - - - - - - - - - + - - <br>
w28 (abbca):  - - - - - - + - + - + - - + - - - - - - - + - - - - - - - - - - + - + - + - - - - - - - <br>
w29 (bbca):   - - - - - + + + - - - - - - - - - - - - + - - - - - - - - - - - - - - - - - - - - - - - <br>
w30 (acac):   - - + + - - - - - - - + + + + - - + - - + + - - - - - - - + - - - - - - - - - + - + + - <br>
w31 (bbb):    - - - + - - - - + - + - - + - - - + - - - + - - - - + - - - + - - - - - + - - - - - - - <br>
w32 (cccbca): - - - - - - - - - - - - + - - - - - - - - - + - - - - - - - - + - - - + - - - - - - - - <br>
w33 (cabca):  - - - - - - + - + - + - - + - - - - - - - + - - - - - - - - - - + - + - + - - - - - - - <br>
w34 (acaccc): - - - - - - - - - + - + - - + - - - - + - - - - + - - - - - - - - + - - - + - - - - - - <br>
w35 (bbbb):   + - - + - - + - + - - - - + + - + + - - - + - - - - - - - + + - - - + - - + - - - + + - <br>
w36 (bbbbb):  - - + + + - - + + - - - + + - - - + + - + + - - - + - + - + - - - - - + + - - - - + - + <br>
w37 (baa):    - - - + - - - - + - - - - + - - - + - - - + - - - - - - - - - - - - - - + - - - - - - - <br>
w38 (abbbab): + - - + - - + - + - - - - + + - + + - - - + - - - - - - - + + - - - + - - + - - - + + - <br>
w39 (ccbca):  - - - - - - - - - - - - - - - - - - - - - - - + - - - - - - - - - - - - - - + - - - - - <br>
w40 (aaccc):  - - + + - - - - - - - + + - + - - - - - + - - - - - - - - + - - - - - - - - - + - - + - <br>
w41 (caccc):  - - - - - - - - - - - - - - - + - - + - - - + - + - - - - - - - - - - - - - - - + - - + <br>
w42 (abcb):   - - - - - - - - - - - - - + - - - + - - - + - - - - - - - - - - - - - - - - - - - + - - <br>
w43 (abbbba): + - - + - - + - + - - - - + + - + + - - - + - - - - - - - + + - - - + - - + - - - + + - <br>
w44 (babbbab):- - + + + - - + + - - - + + - - - + + - + + - - - + - + - + - - - - - + + - - - - + - + <br>
```
Как видно из таблицы все строки разные (легко  ориентироваться по главной диагонали)<br>
Построение было основано на  информации с сайтов:   
https://neerc.ifmo.ru/wiki/index.php?title=Преобразование_регулярного_выражения_в_ДКА
https://cyberzhg.github.io/toolbox/min_dfa
https://cyberzhg.github.io/toolbox/nfa2dfa?regex=KGFifGJjfGJiYmJ8YmJiKSpiYihhfGIpKGF8YikoY2FjfGFjY2N8YmNhKSo=
## Построение НКА:
На основе данного регулярного выражения рассмотрим его факторизацию (ab|bc|bbbb|bbb)*bb(a|b)(a|b)(cac|accc|bca)*,<br>
рассмотрим слово *w* которое порождается данным выражением, причем для него выполняется:<br>
*w* = *w1* *w2* *w3*, где  <br>
*w1* - описывает (ab|bc|bbbb|bbb)* <br>
*w2* - описывает bb(a|b)(a|b) <br>
*w3* - описывает (cac|accc|bca)* <br>
Тогда заметим, что  *w1* и *w3* могут принимать значения ε, а *w2* будет обязательной частью слова.
ниже приведен НКА построенный по *w* = *w1* *w2* *w3*:
<img width="1126" height="631" alt="image" src="https://github.com/user-attachments/assets/5d7446de-ae6e-4c42-b576-049ef53cd8bd" />

Где для него состояния и переходы между ними описывают:<br>
q0- стартовое состяние(вхождение)<br>
q0, q1, ... q4 - *w1* <br>
q0, q5, q6 ... q8 - *w2* <br>
q8, q9, ... q15 - *w3* <br>
Поэтому построенный НКА полностью соответствует нашему регулярному выражению.


## Построение возможно малого НКА:
Но по построенному НКА можно сократить за счет Факторизацией с перекрытием, ведь правая часть *w1*, также может являться левой частью слова *w2*,<br>
за счет этого был построен возможно малый НКА:
<img width="1061" height="607" alt="image" src="https://github.com/user-attachments/assets/ee2740ee-73fe-4b22-8a32-b7e97566160b" />



В итоге получаем 13 конечных состояний, с уже размытым соблюдением *w* = *w1* *w2* *w3*

## Построение ПКА:
На основе этой же структуре слова  *w* = *w1* *w2* *w3*, можем построить ПКА где вида *w* = *w1* *w4* *w3*, где среди *w4* *w3* должна встретиться последовательность *w2* , *w4* это 4 любые символа. <br>
Слово начинается с *w1* = (ab|bc|bbbb|bbb)* , заметим что эта чатсь слова может равняться ε, поэтому из q0 есть возможность сразу перейти по ε в переключающую конструкцию с конъюнкцией двух условий: <br>
1. после 4 любых символов оно должно оканчиваться на *w3* = (cac|accc|bca)* <br>
2. Слово содержит  подслово *w2* т.е. в нем есть последовательность подряд идущих символов bb(a|b)(a|b) <br>

Т.е. слово распознается автоматом если начинается с (ab|bc|bbbb|bbb)* , и поле этого должно иметь структуру (a|c|b)<sup>4</sup>(cac|accc|bca)* - первое условие, и постом проверяет есть ли в нем последовательность bb(a|b)(a|b),
заметим что в *w3* не может встречаться данная последовательность, значит пка будет распознавать слова где (a|c|b)<sup>4</sup> = bb(a|b)(a|b), что напрямую эквивалентно нашему регулярному выражению, поэтому проверку можно не делать. <br>
Вот сам ПКА:

<img width="1018" height="523" alt="image" src="https://github.com/user-attachments/assets/78e1e4e9-d760-4713-81ca-cd97cc98789a" />

тут выбранное слово *w* подается в *q0*, {q0, q1, q2, q3, q4} описывают *w1*.<br>
Потом  попадаем в & который проверяет  выполнение двух условий:
{k0, k1, ... k10 } описывают  первое условие <br>
{p0, p1, ... p4 } описывают  второе условие <br>
можно заметить что p0 и p4 возвращаются в себя через (a|c|b), это опивает структуру  (a|c|b)* *w2* (a|c|b)* .


## Расширенное регулярное выражение
По имеющемуся регулярному выражению необходимо построить расширенное регулярное выражение, распознающее тот же язык.  
Рассмотрим возможные операции расширения и их применение.  
Иногда буду ссылаться на разбиение *W* на *W1 W2 W3*, как в построении НКА.

### 1. Необходимо использовать начало и конец строки (якоря ^ и $).

### 2. Wildcard `.` — любой символ алфавита.  
В нашем языке он не применяется, а если и применим, то не даёт преимуществ: например, w3 может начинаться с любой буквы, но эта буква однозначно определяет последующие несколько символов.

### 3. Классы букв `[c1…ck] ≡ (c1|c2|…|ck)`  
В нашем случае удобно заменить `(a|b)(a|b)` на `[ab][ab]`.

### 4. Опция `τ?`  
Удобно применима к `bbb b?`, заменяя выражение `bbbb | bbb`.

### 5. Положительная итерация `τ+`  
Сама по себе неприменима, поскольку все наши возможные повторения n раз могут и вовсе не повторяться, обращаясь в ε.  
Но, комбинируя её с `τ?`, можно формально заменить звезду Клини:

Для `(k)*` эквивалентным будет `((k)?)+`, где `(k)?` повторяется 0 или 1 раз, а `(...)+` повторяет эту конструкцию 1 или n раз, что нам и нужно.

Тогда можно получить одну из версий переписывания:

```
^((ab|bc|bbb b?)?)+ bb[ab][ab]((cac|accc|bca)?)+$
```

Но я не уверен в правильности такой формы, поэтому не включил её в конечный результат.

### 6. Просмотры (lookahead / lookbehind)  
Применяются довольно сложно. Однако, разбивая слово на *W1 W2 W3*, можно рассмотреть несколько вариантов:

1. После W1 обязательно стоит W2W3. Тогда выражение выглядит как:  
   ```
   w1(?=w2w3)
   ```

2. Перед W3 обязательно стоит W1W2. Тогда выражение выглядит как:  
   ```
   (?<=w1w2)w3
   ```

3. Или комбинация следования W1 W2 W3. Тогда выражение выглядит как:  
   ```
   (?<=w1)w2(?=w3)
   ```

В итоге возможный вариант имел бы вид:

```
^(?<=(ab|bc|bbb b?)*)bb[ab][ab](?=(cac|accc|bca)*)$
```

Но я также не уверен в корректности таких конструкций, поэтому не включил их в окончательный результат.

Если учитывать логику рассуждений, то, объединив всё, можно было бы получить:

```
^(?<=(((ab|bc|bbb b?)?)+)) bb[ab][ab] (?=(((cac|accc|bca)?)+))$
```

### А вот точно правильный вариант итогового выражения:

```
^(ab|bc|bbb b?)* bb[ab][ab](cac|accc|bca)*$
```


